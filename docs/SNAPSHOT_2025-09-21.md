# Platform Snapshot - 2025-09-21

This document captures a checkpoint of the system suitable for rollback or tagging.

## Core Functional Coverage
- Orchestrator, pipeline, decision engine with adaptive tuner
- Persistence: events, decisions, alerts, audit_log, factor_embeddings, factor_feedback
- Embeddings: transformer or hash fallback + pgvector optional ANN
- APIs: ingestion, decisions, alerts, chain, NLP query (scoped), factor similarity (scoped), factor stats, feedback, SSE stream
- Auth: API key/JWT hybrid with scopes
- Metrics: latency, counters (alerts, fallback, redactions, feedback), embedding avg norm
- Maintenance: Vector index auto-adjust, embedding norm compute
- Console + SPA alpha (stream, similarity, stats, feedback toolbar)
- Risk register & snapshot doc

## Recommended Tag
`git tag -a snapshot-2025-09-21 -m "Operational alpha with auth, embeddings, feedback, ANN"`

## Rollback Guidance
1. Record migration version applied (up to 0004).
2. If pgvector-specific index causes issues, drop `idx_factor_embeddings_embedding_cosine`.
3. To disable advanced features quickly:
   - Set empty `API_KEYS_JSON` to close protected endpoints (will 401).
   - Unset `JWT_SECRET` to force API key usage only.
   - Remove vector maintenance by commenting out import in `main.py`.

## Known Deferred Items
- Real drift detection (JS divergence placeholder only)
- Rerank hybrid vector search (planned)
- Feedback -> adaptive tuner weighting loop (planned)
- Full React/Vite conversion
- Access log auditing of auth decisions

## Integrity Hash (Optional)
You may compute a workspace hash (example):
```
find . -type f -not -path '*/.git/*' -exec sha256sum {} \; | sort -k 2 | sha256sum
```
(Windows: use PowerShell Get-ChildItem with Get-FileHash.)

---
This snapshot document is for operational discipline. Update when major architectural inflection points land.
